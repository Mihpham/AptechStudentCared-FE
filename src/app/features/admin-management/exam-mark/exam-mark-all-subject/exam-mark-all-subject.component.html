<div class="p-4 space-y-5 w-full ">
    <!-- Header -->
    <div class="header-container">
        <h1 class="text-2xl font-semibold">Student Exam Marks</h1>
        <p class="text-sm text-gray-500">{{ classDetails?.className }}</p>
    </div>
    
    <!-- Semester Select and Buttons -->
    <div class="flex items-center space-x-4">
        <!-- Select Semester -->
        <div *ngIf="terms.length > 0" class="flex flex-col">
            <label for="termSelect" class="text-gray-700 font-medium">Semester:</label>
            <select
                id="termSelect"
                [(ngModel)]="selectedTerm"
                (change)="filterMarks()"
                class="mt-1 p-2 border border-gray-300 rounded focus:ring focus:ring-blue-400">
                <option value="" disabled>Choose a semester</option>
                <option *ngFor="let term of terms" [value]="term.id">{{ term.name }}</option>
            </select>
        </div>

        <!-- Buttons: Edit and Export -->
        <div class="ml-auto flex space-x-4 pt-6 ">
            <a
                routerLink="/admin/exam/exam-mark-edit/{{classID}}"
                routerLinkActive="active-link"
                class="inline-block">
                <button
                    class="bg-white text-gray-700 hover:bg-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-400 py-2 px-4 rounded shadow flex items-center space-x-2">
                    <i class="fa-solid fa-file-edit text-gray-700"></i>
                    <span>Edit</span>
                </button>
            </a>
            <button
                class="bg-white text-gray-700 hover:bg-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-400 py-2 px-4 rounded shadow flex items-center space-x-2"
                (click)="onExport()">
                <i class="fa-solid fa-file-export"></i>
                <span>Export</span>
            </button>
        </div>
    </div>

    <!-- Marks Table -->
    <div class="overflow-x-auto rounded-lg">
        <table class="min-w-full bg-white border border-gray-300">
            <thead class="bg-gray-100">
                <tr>
                    <th class="border px-4 py-2 text-left">Name</th>
                    <th class="border px-4 py-2 text-left">Class</th>
                    <ng-container *ngFor="let subject of subjects">
                        <th class="border px-4 py-2 text-left">{{ subject }} - LT</th>
                        <th class="border px-4 py-2 text-left">{{ subject }} - TH</th>
                    </ng-container> 
                    <th class="border px-4 py-2 text-left">Project Score</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let student of students" class="hover:bg-gray-50">
                    <td class="border px-4 py-2">{{ student.listExamScore[0].studentName }}</td>
                    <td class="border px-4 py-2">{{ student.className }}</td>
                    <ng-container *ngFor="let subject of subjects">
                        <ng-container *ngIf="student.listExamScore.length > 0">
                            <ng-container *ngFor="let score of student.listExamScore">
                                <ng-container *ngIf="score.subjectCode === subject">
                                    <td class="border px-4 py-2">{{ score.theoreticalScore }}</td>
                                    <td class="border px-4 py-2">{{ score.practicalScore }}</td>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                    </ng-container>
                    <td class="border px-4 py-2">0/100</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="mx-auto mt-4 p-4 dark:bg-gray-900">
  <div class="container mx-auto">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-4">
      <div class="bg-green-100 p-6 rounded-md shadow-md flex flex-col items-center justify-center">
        <span class="text-3xl font-bold">{{ statusCounts().studying }}</span>
        <span class="text-gray-600">Studying</span>
      </div>
      <div class="bg-yellow-100 p-6 rounded-md shadow-md flex flex-col items-center justify-center">
        <span class="text-3xl font-bold">{{ statusCounts().finished }}</span>
        <span class="text-gray-600">Finished</span>
      </div>
      <div class="bg-yellow-200 p-6 rounded-md shadow-md flex flex-col items-center justify-center">
        <span class="text-3xl font-bold">{{ statusCounts().cancel }}</span>
        <span class="text-gray-600">Cancel</span>
      </div>
      <div class="bg-cyan-100 p-6 rounded-md shadow-md flex flex-col items-center justify-center">
        <span class="text-3xl font-bold">{{ statusCounts().scheduled }}</span>
        <span class="text-gray-600">Scheduled</span>
      </div>
    </div>
  </div>

  <!-- Container for buttons aligned to the left -->
  <div class="flex flex-wrap justify-end space-x-2 mb-6 mt-6">
    <button routerLink="/admin/class/create"
      class="bg-white text-gray-700 hover:bg-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-400 py-2 px-4 rounded shadow">
      <i class="fa-solid fa-plus"></i> Add
    </button>
    <button
      class="bg-white text-gray-700 hover:bg-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-400 py-2 px-4 rounded shadow">
      <i class="fa-solid fa-filter"></i> Filter
    </button>
  </div>

  <!-- Responsive table wrapper -->
  <div class="overflow-x-auto">
    <table *ngIf="classes().length > 0 "
      class="min-w-full bg-white shadow-md rounded-lg overflow-hidden table-auto dark:bg-gray-500 dark:text-gray-50 border">
      <thead class="bg-white text-gray-800 border-b-2 dark:bg-gray-900 dark:text-gray-50">
        <tr>
          <th class="py-2 px-4">Class Name</th>
          <th class="py-2 px-4">Days</th>
          <th class="py-2 px-4">Admission Date</th>
          <th class="py-2 px-4">Hour</th>
          <th class="py-2 px-4">Center</th>
          <th class="py-2 px-4">Status</th>
          <th class="py-2 px-4">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let classItem of classes()" class="border-b">
          <td class="py-2 px-4 text-center">{{ classItem.className }}</td>
          <td class="py-2 px-4 text-center">{{ classItem.days }}</td>
          <td class="py-2 px-4 text-center">{{ classItem.admissionDate | date: 'yyyy-MM-dd' }}</td>
          <td class="py-2 px-4 text-center">{{ classItem.hour }}</td>
          <td class="py-2 px-4 text-center">{{ classItem.center }}</td>
          <td class="py-2 px-4 text-center" [ngClass]="{
            'text-green-500': classItem.status === 'STUDYING',
            'text-yellow-500': classItem.status === 'FINISHED',
            'text-red-500': classItem.status === 'CANCEL',
            'text-orange-500': classItem.status === 'SCHEDULED'
          }">
            {{ classItem.status }}
          </td>
          <td class="py-2 px-4 text-center">
            <button [routerLink]="['/admin/class/update', classItem.id]" class="text-blue-400 hover:text-blue-600">
              <mat-icon>edit</mat-icon>
            </button>
            <button class="text-red-400 hover:text-red-600 p-2" (click)="deleteClass(classItem.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="classes().length === 0" class="text-center text-lg p-4 text-gray-600 dark:text-gray-200 font-bold">
      There are no classes.
    </div>

    <div
      class="flex items-center justify-between p-4 mt-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
      <!-- Page indicator & Pagination controls -->
      <div class="flex items-center space-x-4 ml-auto">
        <!-- Items per page -->
        <div class="flex items-center space-x-2">
          <span class="text-gray-700 dark:text-gray-300">Items per page:</span>
          <select
            class="block w-20 p-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm dark:bg-gray-700 dark:text-white"
            [(ngModel)]="itemsPerPage" (ngModelChange)="updatePagination()">
            <option *ngFor="let option of [5, 10, 20]" [value]="option">{{ option }}</option>
          </select>
        </div>
        <!-- Page indicator -->
        <div class="text-gray-700 dark:text-gray-300">
          Page {{ currentPage() }} of {{ totalPages() }}
        </div>

        <!-- Pagination controls -->
        <div class="flex items-center space-x-2">
          <button (click)="goToFirstPage()" [disabled]="currentPage() === 1" class="btn btn-primary"><i
              class="fas fa-angle-double-left"></i></button>
          <button (click)="goToLastPage()" [disabled]="currentPage() === totalPages()" class="btn btn-primary"><i
              class="fa-solid fa-chevron-left"></i></button>
          <button (click)="goToNextPage()" [disabled]="currentPage() === totalPages()" class="btn btn-primary"><i
              class="fa-solid fa-chevron-right"></i></button>
          <button (click)="goToPreviousPage()" [disabled]="currentPage() === 1" class="btn btn-primary"><i
              class="fas fa-angle-double-right"></i></button>

        </div>
      </div>
    </div>
  </div>
</div>